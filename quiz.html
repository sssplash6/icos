<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <title>Quiz - iCos</title>

    <!-- Include any required stylesheets or scripts -->
    <!-- (You can include your styles and scripts here) -->

    <!-- Inline CSS Stylesheet -->
    <style>
        /* Basic styles */
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        .quiz-container {
            display: flex;
            height: 100vh;
        }

        /* PDF Viewer */
        .pdf-viewer {
            width: 70%;
            height: 100%;
        }

        .pdf-viewer iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Question List */
        .question-list {
            width: 30%;
            height: 100%;
            overflow-y: auto;
            padding: 20px;
            background-color: #f9f9f9;
        }

        .question-list h2 {
            margin-bottom: 20px;
        }

        .question {
            margin-bottom: 20px;
        }

        .question p {
            font-weight: bold;
        }

        .options button {
            display: inline-block;
            margin-right: 10px;
            margin-bottom: 5px;
            padding: 10px 15px;
            font-size: 14px;
            border: 1px solid #cccccc;
            border-radius: 5px;
            background-color: #ffffff;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .options button:hover {
            background-color: #2c3e50;
            color: #ffffff;
        }

        .options button.selected {
            background-color: #2c3e50;
            color: #ffffff;
        }

        /* Submit Button */
        .submit-button {
            margin-top: 20px;
            padding: 15px;
            width: 100%;
            font-size: 16px;
            background-color: #ff6f61;
            color: #ffffff;
            border: none;
            cursor: pointer;
        }

        .submit-button:hover {
            background-color: #e55b50;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <!-- PDF Viewer -->
        <div class="pdf-viewer">
            <iframe id="pdf-frame" src=""></iframe>
        </div>

        <!-- Question List -->
        <div class="question-list" id="question-list">
            <h2>Questions</h2>
            <!-- Questions with options will be generated here -->
        </div>
    </div>

    <script>
        // Retrieve URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const year = urlParams.get('year');
        const season = urlParams.get('season');
        const component = urlParams.get('component');

        // Validate the parameters
        if (!year || !season || !component) {
            alert('Invalid selection. Please go back and select all options.');
            window.location.href = 'choose.html';
        } else {
            // Construct the PDF file path
            const pdfPath = `pdfs/${year}_${season}_${component}.pdf`;

            // Set the src of the iframe to display the PDF
            const pdfFrame = document.getElementById('pdf-frame');
            pdfFrame.src = pdfPath;
        }

        // Generate the Question List
        const questionList = document.getElementById('question-list');

        // Assume each paper has 30 questions
        const totalQuestions = 30; // Adjust as needed
        const userAnswers = {}; // To store user's answers

        for (let i = 1; i <= totalQuestions; i++) {
            const questionDiv = document.createElement('div');
            questionDiv.classList.add('question');

            const questionText = document.createElement('p');
            questionText.textContent = `Question ${i}:`;

            const optionsDiv = document.createElement('div');
            optionsDiv.classList.add('options');

            ['A', 'B', 'C', 'D'].forEach((option) => {
                const optionButton = document.createElement('button');
                optionButton.textContent = option;
                optionButton.setAttribute('data-question', i);
                optionButton.setAttribute('data-option', option);

                // Handle option click
                optionButton.addEventListener('click', () => {
                    // Save the user's answer
                    userAnswers[`question-${i}`] = option;

                    // Highlight the selected option
                    const allOptions = optionsDiv.querySelectorAll('button');
                    allOptions.forEach((btn) => btn.classList.remove('selected'));
                    optionButton.classList.add('selected');
                });

                optionsDiv.appendChild(optionButton);
            });

            questionDiv.appendChild(questionText);
            questionDiv.appendChild(optionsDiv);
            questionList.appendChild(questionDiv);
        }

        // Add a submit button
        const submitButton = document.createElement('button');
        submitButton.textContent = 'Submit Answers';
        submitButton.classList.add('submit-button');

        submitButton.addEventListener('click', () => {
            // Process the user's answers
            console.log('User Answers:', userAnswers);

            // For now, display a message
            alert('Your answers have been submitted!');

            // Optionally, clear the selections
            // Reset userAnswers object
            // for (let key in userAnswers) delete userAnswers[key];
            // Remove 'selected' class from all option buttons
            // const allOptionButtons = document.querySelectorAll('.options button');
            // allOptionButtons.forEach((btn) => btn.classList.remove('selected'));
        });

        questionList.appendChild(submitButton);
    </script>
</body>
</html>
